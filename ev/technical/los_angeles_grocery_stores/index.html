<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Grocery Stores in Los Angeles#January 3, 2024
Quite a while ago, I had taken a class at my university that covered a range of design based topics, one such relating to food scarcity and food deserts. According to Wikipedia, a food desert is &ldquo;an area that has limited access to affordable and nutritious food&rdquo;. To continue my work involving osmnx, I figured it might be interesting to consider areas in a city that might classify as a food desert, though I&rsquo;ll use a much more fast and loose definition of a food desert here, simply due to my level of urban analysis, my patience, and the data available with respect to my knowledge of how to deal with it.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Grocery Stores in Los Angeles" />
<meta property="og:description" content="Grocery Stores in Los Angeles#January 3, 2024
Quite a while ago, I had taken a class at my university that covered a range of design based topics, one such relating to food scarcity and food deserts. According to Wikipedia, a food desert is &ldquo;an area that has limited access to affordable and nutritious food&rdquo;. To continue my work involving osmnx, I figured it might be interesting to consider areas in a city that might classify as a food desert, though I&rsquo;ll use a much more fast and loose definition of a food desert here, simply due to my level of urban analysis, my patience, and the data available with respect to my knowledge of how to deal with it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://arshsiddiqui.pages.dev/technical/los_angeles_grocery_stores/" /><meta property="article:section" content="technical" />



<title>Grocery Stores in Los Angeles | Arsh Siddiqui</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.b3488045b94246c08cb956e8a82d99944a7cbd581bf976a700e281bbb73b1a07.css" integrity="sha256-s0iARblCRsCMuVboqC2ZlEp8vVgb&#43;XanAOKBu7c7Ggc=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.5b376990ba123cef8383651fdc7724acb4e4712336893fabc7644e5657296bd1.js" integrity="sha256-WzdpkLoSPO&#43;Dg2Uf3HckrLTkcSM2iT&#43;rx2ROVlcpa9E=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Arsh Siddiqui</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </label>

    <ul>
      
      <li>
        <a href="https://arshsiddiqui.pages.dev/fr/">
          French
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  <ul>
<li><a href="/blog/">Blog</a></li>
<li><a href="/technical/">Technical</a></li>
<li><a href="/research/">Research</a></li>
<li><a href="/poetry/">Poetry</a></li>
<li><a href="/shortstories/">Short Stories</a></li>
<li><a href="/bookreviews/">Book Reviews</a></li>
<li><a href="/others/">Others</a></li>
</ul>










</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Grocery Stores in Los Angeles</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents"></nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="grocery-stores-in-los-angeles">
  Grocery Stores in Los Angeles
  <a class="anchor" href="#grocery-stores-in-los-angeles">#</a>
</h1>
<p><strong>January 3, 2024</strong></p>
<p>Quite a while ago, I had taken a class at my university that covered a range of design based topics, one such relating to food scarcity and food deserts. According to Wikipedia, a food desert is <a href="https://en.wikipedia.org/wiki/Food_desert">&ldquo;an area that has limited access to affordable and nutritious food&rdquo;</a>. To continue my work involving <code>osmnx</code>, I figured it might be interesting to consider areas in a city that might classify as a food desert, though I&rsquo;ll use a much more fast and loose definition of a food desert here, simply due to my level of urban analysis, my patience, and the data available with respect to my knowledge of how to deal with it.</p>
<p>This time, I have decided to target Los Angeles, after having spent a few days there. My data comes from <em>Los Angeles City Data</em>, and is this <a href="https://data.lacity.org/Administration-Finance/Grocery-Stores/g986-7yf9/about_data">dataset</a> in particular. This is a listing of all &ldquo;active grocery stores currently registered with the Office of Finance&rdquo;. Now, some of these grocery stores might be unaffordable, and some of them may not provide nutritious food. I can&rsquo;t say for certain whether these grocery stores <em>might exist in a food desert</em> or <em>if their existence disallows the existence of a food desert in their area</em>, I&rsquo;m just doing an experiment.</p>
<p>We can begin by getting the graph of Los Angeles itself along with its nodes and edges.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>la <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Los Angeles, CA, USA&#34;</span>
</span></span><span style="display:flex;"><span>network_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;walk&#34;</span>
</span></span><span style="display:flex;"><span>G <span style="color:#f92672">=</span> ox<span style="color:#f92672">.</span>graph_from_place(la, network_type<span style="color:#f92672">=</span>network_type)
</span></span><span style="display:flex;"><span>nodes, edges <span style="color:#f92672">=</span> ox<span style="color:#f92672">.</span>graph_to_gdfs(G)
</span></span></code></pre></div><p>We can also take a look at our data itself.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>groceries <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;Grocery_Stores_20240102.csv&#39;</span>)
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">LOCATION ACCOUNT #</th>
<th style="text-align:left">BUSINESS NAME</th>
<th style="text-align:left">DBA NAME</th>
<th style="text-align:left">STREET ADDRESS</th>
<th style="text-align:left">CITY</th>
<th style="text-align:left">ZIP CODE</th>
<th style="text-align:left">LOCATION DESCRIPTION</th>
<th style="text-align:left">MAILING ADDRESS</th>
<th style="text-align:left">MAILING CITY</th>
<th style="text-align:left">MAILING ZIP CODE</th>
<th style="text-align:right">NAICS</th>
<th style="text-align:left">PRIMARY NAICS DESCRIPTION</th>
<th style="text-align:right">COUNCIL DISTRICT</th>
<th style="text-align:left">LOCATION START DATE</th>
<th style="text-align:right">LOCATION END DATE</th>
<th style="text-align:left">LOCATION</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">0002754901-0002-3</td>
<td style="text-align:left">MOISES CLEMENTE</td>
<td style="text-align:left">THE REAL SNACK STORE</td>
<td style="text-align:left">5526 AVALON BLVD</td>
<td style="text-align:left">LOS ANGELES</td>
<td style="text-align:left">90011-5116</td>
<td style="text-align:left">5526 AVALON 90011-5116</td>
<td style="text-align:left">nan</td>
<td style="text-align:left">nan</td>
<td style="text-align:left">nan</td>
<td style="text-align:right">445100</td>
<td style="text-align:left">Grocery stores (including supermarkets &amp; convenience stores without gas)</td>
<td style="text-align:right">9</td>
<td style="text-align:left">02/02/2015</td>
<td style="text-align:right">nan</td>
<td style="text-align:left">(33.9922, -118.2651)</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">0002869486-0001-4</td>
<td style="text-align:left">LETS WORK ALL INC</td>
<td style="text-align:left">7-ELEVEN STORE 39763A</td>
<td style="text-align:left">3079 N SAN FERNANDO ROAD</td>
<td style="text-align:left">LOS ANGELES</td>
<td style="text-align:left">90065-1410</td>
<td style="text-align:left">3079 SAN FERNANDO 90065-1410</td>
<td style="text-align:left">POST OFFICE BOX #219088</td>
<td style="text-align:left">DALLAS</td>
<td style="text-align:left">75221-9088</td>
<td style="text-align:right">445100</td>
<td style="text-align:left">Grocery stores (including supermarkets &amp; convenience stores without gas)</td>
<td style="text-align:right">13</td>
<td style="text-align:left">01/01/2016</td>
<td style="text-align:right">nan</td>
<td style="text-align:left">(34.1144, -118.2454)</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">0002870509-0001-8</td>
<td style="text-align:left">MAURA CALIXTO VELAZQUEZ</td>
<td style="text-align:left">VELAZQUEZ MINI MARKET</td>
<td style="text-align:left">8504 S BROADWAY</td>
<td style="text-align:left">LOS ANGELES</td>
<td style="text-align:left">90003-3335</td>
<td style="text-align:left">8504 BROADWAY 90003-3335</td>
<td style="text-align:left">nan</td>
<td style="text-align:left">nan</td>
<td style="text-align:left">nan</td>
<td style="text-align:right">445100</td>
<td style="text-align:left">Grocery stores (including supermarkets &amp; convenience stores without gas)</td>
<td style="text-align:right">9</td>
<td style="text-align:left">11/19/2015</td>
<td style="text-align:right">nan</td>
<td style="text-align:left">(33.9614, -118.2782)</td>
</tr>
</tbody>
</table>
<p>We can go ahead and use the <code>LOCATION</code> column in this data table as our means of getting access to the latitude and longitude positions of each of the grocery stores, but first we need to convert these into tuples for ease of use, as they are currently formatted as strings.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>grocery_loc <span style="color:#f92672">=</span> groceries[<span style="color:#e6db74">&#39;LOCATION&#39;</span>]
</span></span><span style="display:flex;"><span>grocery_loc_tup <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, len(grocery_loc)):
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>    grocery_loc_tup<span style="color:#f92672">.</span>append(tuple(map(float, grocery_loc[i][<span style="color:#ae81ff">1</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;, &#39;</span>))))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><p>Then we can find the nearest nodes to each of these grocery stores to estimate the node and <code>osmid</code> they would appear at. <strong>This is another limitation to consider.</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>xs <span style="color:#f92672">=</span> [grocery_loc_tup[i][<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, len(grocery_loc_tup))]
</span></span><span style="display:flex;"><span>ys <span style="color:#f92672">=</span> [grocery_loc_tup[i][<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, len(grocery_loc_tup))]
</span></span><span style="display:flex;"><span>ids <span style="color:#f92672">=</span> ox<span style="color:#f92672">.</span>nearest_nodes(G, X<span style="color:#f92672">=</span>xs, Y<span style="color:#f92672">=</span>ys)
</span></span></code></pre></div><p>Great! Now we have a set of <code>osmid</code>s for each of our grocery stores that correspond to points in our initial graph of Los Angeles.</p>
<p>The rest of this is effectively just creating an isochrone graph. To do this I followed and adapted <a href="https://geoffboeing.com/2017/08/isochrone-maps-osmnx-python/">Geoff Boeing&rsquo;s method using <code>osmnx</code></a>. So much of the code that you will see as follows will be his or adjusted from his.</p>
<p>Firstly though, we want to consider a few features. We&rsquo;ll do this in terms of the walking distance from any particular grocery store and we&rsquo;ll assume that the walking speed of an average person is indeed 4.5 km/hr. We can convert this to meters per minute and add the time it takes to traverse an edge on the graph to each edge:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>mpm <span style="color:#f92672">=</span> travel_speed <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">60</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> u, v, k, data <span style="color:#f92672">in</span> G<span style="color:#f92672">.</span>edges(data<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, keys<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>):
</span></span><span style="display:flex;"><span>  data[<span style="color:#e6db74">&#39;time&#39;</span>] <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;length&#39;</span>] <span style="color:#f92672">/</span> mpm
</span></span></code></pre></div><p>The next thing we will have to consider is trip times, which I&rsquo;m going to consider similar to what was initially done in Geoff Boeing&rsquo;s method, but without a trip distance of 24 minutes considered, because that is quite a while one way. In this sense, we&rsquo;ll consider 5 minutes at minimum and 20 minutes at maximum. We can get colors in the range of some colormap thus, to visualize a range of distances.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>trip_times <span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">20</span>]
</span></span><span style="display:flex;"><span>iso_colors <span style="color:#f92672">=</span> ox<span style="color:#f92672">.</span>plot<span style="color:#f92672">.</span>get_colors(n<span style="color:#f92672">=</span>len(trip_times), cmap<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;magma&#39;</span>, start<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, return_hex<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p>We can get the colors of each of the individual nodes on the graph of Los Angeles using these <code>iso_colors</code> and by using each of the <code>osmid</code>s we found to correlated to each of the groceries at &ldquo;starting points&rdquo;:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>node_colors <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> id <span style="color:#f92672">in</span> ids:
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> t, c <span style="color:#f92672">in</span> zip(sorted(trip_times, reverse<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>), iso_colors):
</span></span><span style="display:flex;"><span>    subgraph <span style="color:#f92672">=</span> nx<span style="color:#f92672">.</span>ego_graph(G, id, radius<span style="color:#f92672">=</span>t, distance<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;time&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> node <span style="color:#f92672">in</span> subgraph<span style="color:#f92672">.</span>nodes():
</span></span><span style="display:flex;"><span>      node_colors[node] <span style="color:#f92672">=</span> c
</span></span></code></pre></div><p>And then we can present it all, finally, in a graph, making sure to assign colors where necessary:</p>
<figure>
  <p style="text-align:center;"><img src="images/los_angeles_groceries.png" alt="Walking Distance to Grocery Stores in Los Angeles" style="width: 70%; height: auto;"></p>
  <figcaption style="font-size: 12px; text-align:center;">Walking Distance to Grocery Stores in Los Angeles</figcaption>
</figure>
<p>Hmmmmmm. Evidently a lot of what Open Street Map considers to be Los Angeles is not covered by the data from Los Angeles. Or maybe my code was wrong! I don&rsquo;t know. What I can see is that, of the areas that are covered by colors, a majority of it is within a good walking distance of a grocery store, with the exceptions in brighter areas. I can already notice an amount of problems Id like to come back and resolve, but I&rsquo;m tired, so this will be it for now!</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents"></nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












